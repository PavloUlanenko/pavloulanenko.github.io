"use strict";(self.webpackChunkenglish_app=self.webpackChunkenglish_app||[]).push([[305],{1305:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(1413),s=t(885),i=t(2791),o=t(6871),a=t(6434),c=t(4251),l=t(6562),u=t(1872),d=t(5671),h=t(3144),p=function(){function e(n,t){(0,d.Z)(this,e),this.handleResult=t,this.grammar="#JSGF V1.0; ".concat(n.join("s|s")," ;"),this.init()}return(0,h.Z)(e,[{key:"check",value:function(){return window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechGrammarList=window.SpeechGrammarList||window.webkitSpeechGrammarList,"SpeechRecognition"in window||(alert("Your browser doesn't support the API. Update it"),!1)}},{key:"init",value:function(){if(this.check()){var e=window.SpeechRecognition,n=window.SpeechGrammarList,t=new e,r=new n;r.addFromString(this.grammar,1),t.grammars=r,t.lang="en-US",t.interimResults=!1,t.maxAlternatives=1,t.onresult=this.handleResult,this.recognition=t}}}]),e}(),f=t(184),w=function(e){var n=e.header,t=e.subheader,r=e.rule,s=e.buttonsGroup;return(0,f.jsxs)("div",{className:"ExplanationScreen",children:[(0,f.jsx)("h2",{children:n}),t?(0,f.jsx)("div",{className:"subheader",children:t}):null,(0,f.jsx)("div",{className:"rule",children:r}),(0,f.jsx)("div",{className:"buttons-group",children:s})]})};w.defaultProps={subheader:""};var m=w,g=t(2246),x=(0,a.$j)((function(e){return{data:e.wordsConstructor.fetchedData,loading:e.wordsConstructor.loading,error:e.wordsConstructor.error}}),(function(e){return{fetchDataConnect:function(n){return e(c.cZ(n))}}}))((function(e){var n,t=e.fetchDataConnect,a=e.loading,c=e.data,d=(e.error,(0,i.useState)(!1)),h=(0,s.Z)(d,2),w=h[0],x=h[1],j=(0,i.useState)(0),S=(0,s.Z)(j,2),v=S[0],b=S[1],k=(0,i.useState)(!1),Z=(0,s.Z)(k,2),C=Z[0],N=Z[1],y=(0,i.useState)(null),G=(0,s.Z)(y,2),R=G[0],L=G[1],U=(0,i.useState)(""),D=(0,s.Z)(U,2),H=D[0],T=D[1],E=(0,i.useState)(!1),F=(0,s.Z)(E,2),P=F[0],W=F[1],Y=((0,o.TH)(),(0,o.UO)().token);(0,i.useEffect)((function(){if(w&&!c){var e=g.GP["/spell-word"],n=(0,g.Ym)(e);t((0,g.U1)(n,Y))}}),[w]),(0,i.useEffect)((function(){v&&(L(null),T(""),W(!1))}),[v]);var A={header:"Spell Word",subheader:"Spell the given word correctly and score",rule:"To continue with the task you gotta allow the app to use your mic",buttonsGroup:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(l.Z,{classes:"-secondary",onClickHandler:function(){return x(!0)},children:"Confirm"})})};if(!w)return(0,f.jsx)(m,(0,r.Z)({},A));if(a)return(0,f.jsx)(u.Z,{});if(c&&v<c.length-1){var _=c[v],B=_.imageUrl,I=_.transcription,J=_.translation,O=_.word,V=c.map((function(e){return e.word}));return n=new p(V,(function(e){console.log(e);var n=e.results[0][0].transcript.toLowerCase(),t=(e.results[0][0].confidence,c[v].word);console.log(n,t);var r=n===t;r||T(n),L(r)})).recognition,n.onaudioend=function(){return N(!1)},(0,f.jsx)("div",{className:"SpellWord",children:(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N(!0),n.start()},children:[(0,f.jsxs)("figure",{className:"word-block",children:[(0,f.jsx)("div",{className:"img-holder",children:(0,f.jsx)("img",{src:B,alt:O})}),(0,f.jsx)("figcaption",{children:O}),(0,f.jsx)("p",{className:"translation",children:J}),(0,f.jsxs)("p",{className:"transcription",hidden:!P,children:["[",I,"]"]}),(0,f.jsx)("p",{hidden:null===R,className:"result mt-full ".concat(R?g.TB:g.s0),children:(0,f.jsx)("b",{children:R?"Correct":"Wrong. You've spelt: ".concat(H)})})]}),(0,f.jsxs)("div",{className:"buttons-wrap",children:[(0,f.jsx)(l.Z,{type:"submit",classes:"-pulse ".concat(C&&g.c8),children:"Spell"}),(0,f.jsx)(l.Z,{type:"button",classes:"-primary -wide",onClickHandler:function(){b((function(e){return e+1}))},children:"Next \u2192"}),(0,f.jsx)(l.Z,{type:"button",classes:"-secondary -wide",onClickHandler:function(){return W(!0)},children:"Show Transcription"})]})]})})}}))}}]);
//# sourceMappingURL=305.6dfaab1d.chunk.js.map