"use strict";(self.webpackChunkenglish_app=self.webpackChunkenglish_app||[]).push([[305],{1305:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(1413),i=t(885),s=t(2791),a=t(6871),c=t(6434),o=t(4251),l=t(4701),u=t(6562),d=t(3670),h=t(5671),f=t(3144),p=function(){function e(n,t){(0,h.Z)(this,e),this.handleResult=t,this.grammar="#JSGF V1.0; ".concat(n.join("s|s")," ;"),this.init()}return(0,f.Z)(e,[{key:"check",value:function(){return window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechGrammarList=window.SpeechGrammarList||window.webkitSpeechGrammarList,"SpeechRecognition"in window||(alert("Your browser doesn't support the API. Update it"),!1)}},{key:"init",value:function(){if(this.check()){var e=window.SpeechRecognition,n=window.SpeechGrammarList,t=new e,r=new n;r.addFromString(this.grammar,1),t.grammars=r,t.lang="en-US",t.interimResults=!1,t.maxAlternatives=1,t.onresult=this.handleResult,this.recognition=t}}}]),e}(),m=t(184),w=function(e){var n=e.header,t=e.subheader,r=e.rule,i=e.buttonsGroup;return(0,m.jsxs)("div",{className:"ExplanationScreen",children:[(0,m.jsx)("h2",{children:n}),t?(0,m.jsx)("div",{className:"subheader",children:t}):null,(0,m.jsx)("div",{className:"rule",children:r}),(0,m.jsx)("div",{className:"buttons-group",children:i})]})};w.defaultProps={subheader:""};var S=w,v=t(2246),g={fetchDataConnect:function(e,n){return o.cZ(e,n)},restoreInitialStateConnect:l.N.restoreInitialState},x=(0,c.$j)((function(e){var n,t,r;return{data:null===(n=e.spellWord)||void 0===n?void 0:n.fetchedData,loading:null===(t=e.spellWord)||void 0===t?void 0:t.loading,error:null===(r=e.spellWord)||void 0===r?void 0:r.error}}),g)((function(e){var n,t=e.fetchDataConnect,c=e.restoreInitialStateConnect,o=e.loading,h=e.data,f=(e.error,(0,s.useState)(!1)),w=(0,i.Z)(f,2),g=w[0],x=w[1],j=(0,s.useState)(0),N=(0,i.Z)(j,2),b=N[0],k=N[1],Z=(0,s.useState)(!1),C=(0,i.Z)(Z,2),y=C[0],G=C[1],R=(0,s.useState)(null),H=(0,i.Z)(R,2),W=H[0],F=H[1],L=(0,s.useState)(""),U=(0,i.Z)(L,2),D=U[0],E=U[1],I=(0,s.useState)(!1),T=(0,i.Z)(I,2),P=T[0],Y=T[1],A=((0,a.TH)(),(0,a.UO)().token);(0,s.useEffect)((function(){return function(){return c()}}),[]),(0,s.useEffect)((function(){if(g&&!h){var e=v.GP["/spell-word"],n=(0,v.Ym)(e),r=l.N.fetchStart,i=l.N.fetchSuccess,s=l.N.fetchFail;t((0,v.U1)(n,A),{fetchStartHandler:r,fetchSuccessHandler:i,fetchFailHandler:s})}}),[g]),(0,s.useEffect)((function(){b&&(F(null),E(""),Y(!1))}),[b]);var _={header:"Spell Word",subheader:"Spell the given word correctly and score",rule:"To continue with the task you gotta allow the app to use your mic",buttonsGroup:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(u.Z,{classNames:"-secondary",onClickHandler:function(){return x(!0)},children:"Confirm"})})};if(!g)return(0,m.jsx)(S,(0,r.Z)({},_));if(o)return(0,m.jsx)(d.Z,{});if(h&&b<h.length-1){var B=h[b],J=B.imageUrl,O=B.transcription,V=B.translation,$=B.word,q=h.map((function(e){return e.word}));return n=new p(q,(function(e){var n=e.results[0][0].transcript.toLowerCase(),t=(e.results[0][0].confidence,n===h[b].word);t||E(n),F(t)})).recognition,n.onaudioend=function(){return G(!1)},(0,m.jsx)("div",{className:"SpellWord",children:(0,m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),G(!0),n.start()},children:[(0,m.jsxs)("figure",{className:"word-block",children:[(0,m.jsx)("div",{className:"img-holder",children:(0,m.jsx)("img",{src:J,alt:$})}),(0,m.jsx)("figcaption",{children:$}),(0,m.jsx)("p",{className:"translation",children:V}),(0,m.jsxs)("p",{className:"transcription",hidden:!P,children:["[",O,"]"]}),(0,m.jsx)("p",{hidden:null===W,className:"result mt-full ".concat(W?v.TB:v.s0),children:(0,m.jsx)("b",{children:W?"Correct":"Wrong. You've spelt: ".concat(D)})})]}),(0,m.jsxs)("div",{className:"buttons-wrap",children:[(0,m.jsx)(u.Z,{type:"submit",classNames:"-pulse ".concat(y&&v.c8),children:"Spell"}),(0,m.jsx)(u.Z,{classNames:"-primary -wide",onClickHandler:function(){k((function(e){return e+1}))},children:"Next \u2192"}),(0,m.jsx)(u.Z,{classNames:"-secondary -wide",onClickHandler:function(){return Y(!0)},children:"Show Transcription"})]})]})})}}))}}]);
//# sourceMappingURL=305.7a758a18.chunk.js.map